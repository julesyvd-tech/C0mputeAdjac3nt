<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Compost Adjacent</title>
<meta name="description" content="Compost Adjacent â€” cosmic compost transmissions" />

<!-- Pink glowing worm favicon -->
<link rel="icon" href="data:image/svg+xml;utf8,
%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Cdefs%3E%3Cfilter id='g'%3E%3CfeGaussianBlur stdDeviation='2.8'/%3E%3C/filter%3E%3C/defs%3E%3Crect width='100%25' height='100%25' fill='%23060606'/%3E%3Cpath d='M8 36c4-10 12-12 20-10s14 8 20 12 8 6 12 4' stroke='%23ff4fb3' stroke-width='4' stroke-linecap='round' fill='none' filter='url(%23g)'/%3E%3C/svg%3E">

<style>
  :root{
    --worm1:#ff4fb3; --worm2:#80ffb0; --worm3:#ffd24a;
    --worm4:#ff8a3d; --worm5:#50f1ff; --worm6:#ff5b5b;
    --bg:#030303;
  }
  html,body{
    height:100%;margin:0;background:var(--bg);
    font-family:Verdana,Arial,sans-serif;color:#dfeee0;
    overflow:hidden;-webkit-font-smoothing:antialiased;
  }

  body::before{
    content:"";position:fixed;inset:0;z-index:0;pointer-events:none;
    background-image:url("data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32'%3E%3Crect width='100%25' height='100%25' fill='%23020202'/%3E%3Cfilter id='n'%3E%3CfeTurbulence baseFrequency='0.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.07'/%3E%3C/svg%3E");
    background-repeat:repeat;mix-blend-mode:overlay;opacity:.9;
  }

  canvas#field{
    position:fixed;inset:0;z-index:1;width:100%;height:100%;display:block;
  }

  .wrap{
    position:relative;z-index:2;min-height:100vh;
    display:flex;flex-direction:column;align-items:center;justify-content:center;
    gap:14px;padding-top:2vh;
  }
  .title-vertical{
    display:flex;flex-direction:column;align-items:center;gap:2px;user-select:none;
  }
  .title-vertical .letter{
    display:block;font-size:clamp(28px,6.5vw,64px);
    font-weight:800;line-height:0.9;text-transform:uppercase;
    transform-origin:50% 50%;
    text-shadow:0 10px 24px rgba(0,0,0,.6);
  }
  @keyframes letterFloat{
    0%{transform:translateY(0)}
    25%{transform:translateY(-10%)}
    50%{transform:translateY(0)}
    75%{transform:translateY(6%)}
    100%{transform:translateY(0)}
  }

  .player-box{
    position:fixed;left:18px;top:18px;z-index:3;width:260px;height:84px;
    border-radius:10px;background:linear-gradient(180deg,rgba(0,0,0,.55),rgba(0,0,0,.35));
    border:2px solid rgba(255,255,255,.04);
    box-shadow:0 18px 44px rgba(0,0,0,.6),0 0 28px rgba(255,255,255,.03);
    display:flex;align-items:center;gap:8px;padding:8px;
  }
  .player-inner{flex:1;height:100%;border-radius:8px;overflow:hidden}

  .links-left,.links-right{
    position:fixed;bottom:22px;z-index:3;display:flex;gap:14px;align-items:center
  }
  .links-left{left:18px}
  .links-right{right:18px}
  .link-btn{
    width:72px;height:72px;display:grid;place-items:center;
    border-radius:12px;text-decoration:none;
    border:2px solid rgba(255,255,255,0.03);
    background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(0,0,0,0.12));
    box-shadow:0 8px 28px rgba(0,0,0,.55);
  }
  .link-btn svg{width:48px;height:28px}

  .inverted{filter:invert(1) hue-rotate(180deg)}
  .inverted .player-box{filter:none}

  @media(max-width:520px){
    .link-btn{width:56px;height:56px}
    .link-btn svg{width:40px;height:22px}
    .player-box{width:220px;height:72px;left:12px;top:12px}
    .title-vertical .letter{font-size:clamp(20px,8vw,36px)}
  }
</style>
</head>
<body>
  <canvas id="field" aria-hidden="true"></canvas>

  <div class="wrap" role="main" aria-labelledby="siteTitle">
    <div class="title-vertical" id="siteTitle" aria-label="COMPOST ADJACENT" role="heading" aria-level="1"></div>
  </div>

  <div class="links-left">
    <a class="link-btn" href="https://open.spotify.com/artist/4JYHgAnjpihRXtvZ8Qssok" target="_blank" aria-label="Spotify">
      <svg viewBox="0 0 200 40" xmlns="http://www.w3.org/2000/svg"><path d="M5,20 Q25,10 45,20 T85,20 T125,20 T165,20 T195,20" fill="none" stroke="var(--worm2)" stroke-width="7" stroke-linecap="round" stroke-linejoin="round"/></svg>
    </a>
  </div>

  <div class="links-right">
    <a class="link-btn" href="https://www.instagram.com/compostadjacent/" target="_blank" aria-label="Instagram">
      <svg viewBox="0 0 200 40" xmlns="http://www.w3.org/2000/svg"><path d="M5,20 Q25,10 45,20 T85,20 T125,20 T165,20 T195,20" fill="none" stroke="var(--worm4)" stroke-width="7" stroke-linecap="round" stroke-linejoin="round"/></svg>
    </a>
    <a class="link-btn" href="https://www.instagram.com/compostadjacent/" target="_blank" aria-label="Contact">
      <svg viewBox="0 0 200 40" xmlns="http://www.w3.org/2000/svg"><path d="M5,20 Q25,10 45,20 T85,20 T125,20 T165,20 T195,20" fill="none" stroke="var(--worm1)" stroke-width="7" stroke-linecap="round" stroke-linejoin="round"/></svg>
    </a>
  </div>

  <div class="player-box" id="playerBox">
    <div class="player-inner">
      <iframe id="spotifyFrame"
        src="https://open.spotify.com/embed/artist/4JYHgAnjpihRXtvZ8Qssok?utm_source=generator&theme=0"
        width="100%" height="80" frameborder="0"
        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
        loading="lazy" title="Compost Adjacent Spotify player"></iframe>
    </div>
  </div>
<script>
const canvas = document.getElementById("field");
const ctx = canvas.getContext("2d");
let w,h; 
function resize(){ w = canvas.width = innerWidth; h = canvas.height = innerHeight; }
window.addEventListener("resize", resize); resize();

// ---------- COLOR PALETTE ----------
const wormColors = ["#ff4fb3","#80ffb0","#ffd24a","#ff8a3d","#50f1ff","#ff5b5b"];
const starColor = "rgba(255,255,255,0.9)";

// ---------- TITLE ----------
const title = "COMPOST ADJACENT";
const titleWrap = document.getElementById("siteTitle");
title.split("").forEach((l,i)=>{
  const span = document.createElement("span");
  span.className="letter";
  span.textContent = l;
  span.style.color = wormColors[i%wormColors.length];
  span.style.animation=`letterFloat ${1.6+Math.random()*0.8}s ease-in-out ${i*0.1}s infinite`;
  titleWrap.appendChild(span);
});

// ---------- WORMS ----------
const worms = Array.from({length:120},()=>({
  x:Math.random()*w,
  y:Math.random()*h,
  c:wormColors[Math.floor(Math.random()*wormColors.length)],
  phase:Math.random()*Math.PI*2,
  speed:0.1+Math.random()*0.25
}));

// ---------- STARS ----------
const stars = Array.from({length:300},()=>({
  x:Math.random()*w,
  y:Math.random()*h,
  r:Math.random()*1.2+0.3,
  a:Math.random(),
  f:0.002+Math.random()*0.004
}));

// ---------- SHOOTING STARS ----------
let shootingStars = [];
let counter = 0;
function spawnShootingStar(){
  const angle = Math.random()*Math.PI*2;
  const speed = 6+Math.random()*3;
  shootingStars.push({
    x:Math.random()*w,
    y:Math.random()*h*0.5,
    vx:Math.cos(angle)*speed,
    vy:Math.sin(angle)*speed,
    life:0
  });
  counter++;
  if(counter%5===0) explodeNearCenter();
}
function explodeNearCenter(){
  for(let i=0;i<25;i++){
    shootingStars.push({
      x:w/2+(Math.random()-0.5)*100,
      y:h/2+(Math.random()-0.5)*100,
      vx:(Math.random()-0.5)*8,
      vy:(Math.random()-0.5)*8,
      life:0
    });
  }
}

// ---------- MAIN DRAW ----------
function draw(){
  ctx.clearRect(0,0,w,h);

  // stars
  for(const s of stars){
    s.a += s.f*(Math.random()>0.5?1:-1);
    s.a = Math.max(0.3,Math.min(1,s.a));
    ctx.beginPath();
    ctx.fillStyle = `rgba(255,255,255,${s.a})`;
    ctx.shadowColor = "#d0f8ff";
    ctx.shadowBlur = 8;
    ctx.arc(s.x,s.y,s.r,0,Math.PI*2);
    ctx.fill();
  }

  // worms
  for(const worm of worms){
    worm.phase += worm.speed*0.03;
    worm.x += Math.cos(worm.phase*0.5)*0.4;
    worm.y += Math.sin(worm.phase*0.3)*0.4;
    if(worm.x<0) worm.x=w; if(worm.x>w) worm.x=0;
    if(worm.y<0) worm.y=h; if(worm.y>h) worm.y=0;
    ctx.beginPath();
    ctx.strokeStyle = worm.c;
    ctx.lineWidth = 2.2;
    ctx.shadowColor = worm.c;
    ctx.shadowBlur = 12;
    const len = 18;
    ctx.moveTo(worm.x - len/2*Math.cos(worm.phase),
               worm.y - len/2*Math.sin(worm.phase));
    ctx.lineTo(worm.x + len/2*Math.cos(worm.phase),
               worm.y + len/2*Math.sin(worm.phase));
    ctx.stroke();
  }

  // shooting stars
  for(const s of shootingStars){
    s.x += s.vx; s.y += s.vy; s.life++;
    ctx.beginPath();
    const grad = ctx.createLinearGradient(s.x,s.y,s.x-s.vx*4,s.y-s.vy*4);
    grad.addColorStop(0,"rgba(255,255,255,0.9)");
    grad.addColorStop(1,"rgba(255,255,255,0)");
    ctx.strokeStyle = grad;
    ctx.lineWidth = 2;
    ctx.shadowColor="#fff";
    ctx.shadowBlur=8;
    ctx.moveTo(s.x,s.y);
    ctx.lineTo(s.x - s.vx*4, s.y - s.vy*4);
    ctx.stroke();
  }
  shootingStars = shootingStars.filter(s=>s.life<60);

  requestAnimationFrame(draw);
}
draw();

// ---------- SHOOTING STAR LOOP ----------
setInterval(()=>{ if(!document.hidden) spawnShootingStar(); },90000);

// ---------- 100th VISIT INVERT ----------
const key="comp_adj_visits";
let v=parseInt(localStorage.getItem(key)||"0")+1;
localStorage.setItem(key,v);
if(v%100===0) document.body.classList.add("inverted");

// ---------- SMALL PERF OPTIMIZATION ----------
document.addEventListener("visibilitychange",()=>{
  if(document.hidden) cancelAnimationFrame(draw);
  else requestAnimationFrame(draw);
});
</script>
</body>
</html>

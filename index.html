<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Compost Adjacent</title>
<meta name="description" content="Compost Adjacent â€” cosmic compost transmissions" />

<!-- translucent-purple worm favicon -->
<link rel="icon" href="data:image/svg+xml;utf8,
%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Cdefs%3E%3Cfilter id='g'%3E%3CfeGaussianBlur stdDeviation='2.8'/%3E%3C/filter%3E%3C/defs%3E%3Crect width='100%25' height='100%25' fill='%23060606'/%3E%3Cpath d='M8 36c4-10 12-12 20-10s14 8 20 12 8 6 12 4' stroke='%238a4bff' stroke-width='4' stroke-linecap='round' fill='none' filter='url(%23g)'/%3E%3C/svg%3E">

<style>
:root{
  --worm1:#ff4fb3;--worm2:#80ffb0;--worm3:#ffd24a;
  --worm4:#ff8a3d;--worm5:#50f1ff;--worm6:#ff5b5b;
  --bg:#030303;
}
html,body{
  height:100%;margin:0;background:var(--bg);
  font-family:Verdana,Arial,sans-serif;color:#dfeee0;
  overflow:hidden;-webkit-font-smoothing:antialiased;
}
body::before{
  content:"";position:fixed;inset:0;z-index:0;pointer-events:none;
  background-image:url("data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32'%3E%3Crect width='100%25' height='100%25' fill='%23020202'/%3E%3Cfilter id='n'%3E%3CfeTurbulence baseFrequency='0.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.07'/%3E%3C/svg%3E");
  background-repeat:repeat;mix-blend-mode:overlay;opacity:.9;
}
canvas#field{position:fixed;inset:0;z-index:1;width:100%;height:100%;display:block}

/* ----- PLAYER BAR ----- */
.player-bar{
  position:fixed;top:0;left:0;width:100%;height:110px;z-index:3;
  border-bottom-left-radius:18px;border-bottom-right-radius:18px;
  background:linear-gradient(180deg,
    rgba(160,90,255,0.4) 0%,
    rgba(90,40,180,0.25) 100%);
  box-shadow:0 6px 22px rgba(140,70,255,0.35), inset 0 0 12px rgba(255,255,255,0.08);
  backdrop-filter:blur(6px);
  overflow:hidden;
}
.player-bar::after{
  content:"";position:absolute;top:0;left:-30%;
  width:60%;height:100%;
  background:linear-gradient(90deg,rgba(255,255,255,0.15) 0%,rgba(255,255,255,0) 100%);
  animation:shine 10s linear infinite;
}
@keyframes shine{
  0%{transform:translateX(-100%)}
  100%{transform:translateX(200%)}
}
.player-inner{
  position:absolute;top:10px;left:50%;transform:translateX(-50%);
  width:90%;height:90%;
  border-radius:10px;overflow:hidden;
}
.player-inner iframe{width:100%;height:100%;border:none}

/* ----- TITLE + LAYOUT ----- */
.wrap{
  position:relative;z-index:2;
  min-height:100vh;display:flex;
  flex-direction:column;align-items:center;justify-content:center;
  gap:14px;padding-top:140px; /* offset below player bar */
}
.title-vertical{
  display:flex;flex-direction:column;align-items:center;gap:2px;user-select:none;
}
.title-vertical .letter{
  display:block;font-size:clamp(28px,6.5vw,64px);
  font-weight:800;line-height:0.9;text-transform:uppercase;
  transform-origin:50% 50%;
  text-shadow:0 10px 24px rgba(0,0,0,.6);
}
@keyframes letterFloat{
  0%{transform:translateY(0)}
  25%{transform:translateY(-10%)}
  50%{transform:translateY(0)}
  75%{transform:translateY(6%)}
  100%{transform:translateY(0)}
}

/* ----- LINK BUTTONS ----- */
.links-left,.links-right{
  position:fixed;bottom:22px;z-index:3;display:flex;gap:14px;align-items:center;
}
.links-left{left:18px}
.links-right{right:18px}
.link-btn{
  width:72px;height:72px;display:grid;place-items:center;
  border-radius:12px;text-decoration:none;
  border:2px solid rgba(255,255,255,0.03);
  background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(0,0,0,0.12));
  box-shadow:0 8px 28px rgba(0,0,0,.55);
}
.link-btn svg{width:48px;height:28px}
.inverted{filter:invert(1) hue-rotate(180deg)}
.inverted .player-bar{filter:none}
@media(max-width:520px){
  .link-btn{width:56px;height:56px}
  .link-btn svg{width:40px;height:22px}
  .player-bar{height:96px}
  .wrap{padding-top:120px}
  .title-vertical .letter{font-size:clamp(20px,8vw,36px)}
}
</style>
</head>
<body>
<canvas id="field" aria-hidden="true"></canvas>

<div class="player-bar">
  <div class="player-inner">
    <iframe src="https://open.spotify.com/embed/artist/4JYHgAnjpihRXtvZ8Qssok?utm_source=generator&theme=0"
      allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
      loading="lazy" title="Compost Adjacent Spotify player"></iframe>
  </div>
</div>

<div class="wrap" role="main" aria-labelledby="siteTitle">
  <div class="title-vertical" id="siteTitle" aria-label="COMPOST ADJACENT" role="heading" aria-level="1"></div>
</div>

<div class="links-left">
  <a class="link-btn" href="https://open.spotify.com/artist/4JYHgAnjpihRXtvZ8Qssok" target="_blank" aria-label="Spotify">
    <svg viewBox="0 0 200 40" xmlns="http://www.w3.org/2000/svg"><path d="M5,20 Q25,10 45,20 T85,20 T125,20 T165,20 T195,20" fill="none" stroke="var(--worm2)" stroke-width="7" stroke-linecap="round" stroke-linejoin="round"/></svg>
  </a>
</div>

<div class="links-right">
  <a class="link-btn" href="https://www.instagram.com/compostadjacent/" target="_blank" aria-label="Instagram">
    <svg viewBox="0 0 200 40" xmlns="http://www.w3.org/2000/svg"><path d="M5,20 Q25,10 45,20 T85,20 T125,20 T165,20 T195,20" fill="none" stroke="var(--worm4)" stroke-width="7" stroke-linecap="round" stroke-linejoin="round"/></svg>
  </a>
  <a class="link-btn" href="https://www.instagram.com/compostadjacent/" target="_blank" aria-label="Contact">
    <svg viewBox="0 0 200 40" xmlns="http://www.w3.org/2000/svg"><path d="M5,20 Q25,10 45,20 T85,20 T125,20 T165,20 T195,20" fill="none" stroke="var(--worm1)" stroke-width="7" stroke-linecap="round" stroke-linejoin="round"/></svg>
  </a>
</div>
<script>
const canvas=document.getElementById("field");
const ctx=canvas.getContext("2d");
let w,h;
function resize(){w=canvas.width=innerWidth;h=canvas.height=innerHeight;}
window.addEventListener("resize",resize);resize();

// ---------- COLORS ----------
const wormColors=["#ff4fb3","#80ffb0","#ffd24a","#ff8a3d","#50f1ff","#ff5b5b"];
const starColors=["#ffffff","#ff8aff","#7affff","#fffd7a","#ff7a7a","#a9ff7a"];

// ---------- TITLE ----------
const title="COMPOST ADJACENT";
const titleWrap=document.getElementById("siteTitle");
title.split("").forEach((l,i)=>{
  const s=document.createElement("span");
  s.className="letter";s.textContent=l;
  s.style.color=wormColors[i%wormColors.length];
  s.style.animation=`letterFloat ${1.7+Math.random()*0.6}s ease-in-out ${i*0.1}s infinite`;
  titleWrap.appendChild(s);
});

// ---------- STARS ----------
const stars=Array.from({length:300},()=>({
  x:Math.random()*w,
  y:Math.random()*h,
  r:Math.random()*1.3+0.2,
  baseA:0.4+Math.random()*0.4,
  phase:Math.random()*Math.PI*2,
  speed:0.004+Math.random()*0.003,
  color:starColors[Math.floor(Math.random()*starColors.length)]
}));

// ---------- WORMS ----------
const worms=[];
for(let i=0;i<90;i++){
  const segs=6+Math.floor(Math.random()*3);
  const body=[];
  for(let j=0;j<segs;j++){body.push({x:Math.random()*w,y:Math.random()*h});}
  worms.push({
    body,
    angle:Math.random()*Math.PI*2,
    drift:0.05+Math.random()*0.12,
    color:wormColors[Math.floor(Math.random()*wormColors.length)],
    phase:Math.random()*Math.PI*2,
    freq:0.05+Math.random()*0.03,
    amp:3+Math.random()*2
  });
}

// ---------- SHOOTING STARS ----------
let shootingStars=[],counter=0;
function spawnShootingStar(){
  const angle=Math.random()*Math.PI*2;
  const speed=6+Math.random()*3;
  shootingStars.push({
    x:Math.random()*w,
    y:Math.random()*h*0.5,
    vx:Math.cos(angle)*speed,
    vy:Math.sin(angle)*speed,
    life:0
  });
  counter++;
  if(counter%10===0) explodeNearCenter();
}
function explodeNearCenter(){
  for(let i=0;i<25;i++){
    shootingStars.push({
      x:w/2+(Math.random()-0.5)*100,
      y:h/2+(Math.random()-0.5)*100,
      vx:(Math.random()-0.5)*8,
      vy:(Math.random()-0.5)*8,
      life:0
    });
  }
}

// ---------- DRAW LOOP ----------
function draw(){
  ctx.clearRect(0,0,w,h);

  // stars twinkle + color flare
  for(const s of stars){
    s.phase+=s.speed;
    const flicker=Math.sin(s.phase*2+Math.random()*0.2)*0.3;
    const alpha=Math.max(0,s.baseA+flicker);
    ctx.beginPath();
    ctx.fillStyle=`${s.color}${Math.floor(alpha*255).toString(16).padStart(2,"0")}`;
    ctx.shadowColor=s.color;
    ctx.shadowBlur=6+Math.sin(s.phase*3)*3;
    ctx.arc(s.x,s.y,s.r,0,Math.PI*2);
    ctx.fill();
  }

  // worms wriggle + drift
  for(const worm of worms){
    worm.phase+=worm.freq;
    worm.angle+=worm.drift*0.05;
    const head=worm.body[0];
    head.x+=Math.cos(worm.angle)*worm.drift*8;
    head.y+=Math.sin(worm.angle)*worm.drift*8;
    if(head.x<0)head.x=w;if(head.x>w)head.x=0;
    if(head.y<0)head.y=h;if(head.y>h)head.y=0;
    for(let i=1;i<worm.body.length;i++){
      const prev=worm.body[i-1];
      const seg=worm.body[i];
      const dx=prev.x-seg.x,dy=prev.y-seg.y;
      const dist=Math.sqrt(dx*dx+dy*dy);
      const target=6;
      seg.x+=dx/dist*(dist-target);
      seg.y+=dy/dist*(dist-target);
      seg.x+=Math.sin(worm.phase+i*0.6)*worm.amp*0.02;
      seg.y+=Math.cos(worm.phase+i*0.6)*worm.amp*0.02;
    }
    ctx.beginPath();
    ctx.strokeStyle=worm.color;
    ctx.lineWidth=2.2;
    ctx.shadowColor=worm.color;
    ctx.shadowBlur=10+4*Math.sin(worm.phase);
    ctx.moveTo(worm.body[0].x,worm.body[0].y);
    for(let i=1;i<worm.body.length;i++){
      const p=worm.body[i];
      ctx.lineTo(p.x,p.y);
    }
    ctx.stroke();
  }

  // shooting stars
  for(const s of shootingStars){
    s.x+=s.vx; s.y+=s.vy; s.life++;
    ctx.beginPath();
    const grad=ctx.createLinearGradient(s.x,s.y,s.x-s.vx*4,s.y-s.vy*4);
    grad.addColorStop(0,"rgba(255,255,255,0.9)");
    grad.addColorStop(1,"rgba(255,255,255,0)");
    ctx.strokeStyle=grad;
    ctx.lineWidth=2;
    ctx.shadowColor="#fff";
    ctx.shadowBlur=8;
    ctx.moveTo(s.x,s.y);
    ctx.lineTo(s.x-s.vx*4,s.y-s.vy*4);
    ctx.stroke();
  }
  shootingStars=shootingStars.filter(s=>s.life<60);

  requestAnimationFrame(draw);
}
draw();

// ---------- SHOOTING STAR TIMER ----------
setInterval(()=>{if(!document.hidden)spawnShootingStar();},30000);

// ---------- 100th VISIT INVERT ----------
const key="comp_adj_visits";
let v=parseInt(localStorage.getItem(key)||"0")+1;
localStorage.setItem(key,v);
if(v%100===0)document.body.classList.add("inverted");

// ---------- PAUSE WHEN TAB HIDDEN ----------
document.addEventListener("visibilitychange",()=>{
  if(document.hidden)cancelAnimationFrame(draw);
  else requestAnimationFrame(draw);
});
</script>
</body>
</html>
